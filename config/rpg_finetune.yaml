# Lancer RPG Fine-tuning Configuration

project_name: "lancer" # Change this to match your synthetic config
dataset_tag: "v1_ctx4096" # Must match the generated dataset you want to train on

model:
  # To use Qwen 2.5 (Unsloth optimized), just change this string!
  # A100/H100 Recommendation: "unsloth/Qwen2.5-32B-Instruct-bnb-4bit"
  # T4 (Free Colab) Recommendation: "unsloth/Qwen2.5-7B-Instruct-bnb-4bit" or "unsloth/Meta-Llama-3.1-8B-Instruct-bnb-4bit"
  base_model: "unsloth/Qwen2.5-32B-Instruct-bnb-4bit"

  # A100/H100 specific: You can increase this significantly (e.g., 4096, 8192)
  max_seq_length: 4096
  load_in_4bit: true # Even on A100, 4-bit is faster/efficient, but you can turn this false for 16-bit full precision

dataset:
  # Use the persistent Drive path
  train_path: "/content/drive/MyDrive/llm_experiments/datasets/{project_name}_{dataset_tag}_synthetic.jsonl"
  val_path: "/content/drive/MyDrive/llm_experiments/datasets/{project_name}_{dataset_tag}_val.jsonl" # Optional

training:
  # Save the output directly to Drive
  output_dir: "/content/drive/MyDrive/llm_experiments/outputs/{project_name}_{dataset_tag}_lora"
  
  # Professional Tip: Set this to "wandb" to track loss curves in the cloud!
  # You'll need to run `wandb login` in Colab first.
  report_to: "none" 

  # A100 Optimization:
  # You can increase batch size (e.g., 4, 8, 16) depending on model size
  per_device_train_batch_size: 4
  gradient_accumulation_steps: 2 # Adjust based on batch size (aim for total batch ~16-32)

  warmup_steps: 5
  max_steps: 60
  learning_rate: 2.0e-4
  logging_steps: 1
  save_steps: 20 # Save checkpoint every 20 steps
  optim: "adamw_8bit"
  weight_decay: 0.01
  lr_scheduler_type: "linear"
  seed: 3407

lora:
  r: 16
  lora_alpha: 16
  lora_dropout: 0
  bias: "none"
  use_gradient_checkpointing: "unsloth" # specific to unsloth
  random_state: 3407
  use_rslora: false
  loftq_config: null
